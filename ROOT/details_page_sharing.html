<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>优师云下载</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        .my-download {
            height: -webkit-fill-available;
            background-color: #fff;
            background-image: url("img/jt-left.png"),url("img/jt-right.png");
            background-repeat: no-repeat,no-repeat;
            background-size: 40%,50%;
            background-position: left bottom,right top;
        }

        .my-download-btn {
            text-align: center;
        }

        .my-download-btn button {
            width: 60%;
            font-size: 20px;
            margin: 10px 0;
            padding: 8px 0;
            border-radius: 55px;
            border: none;
            color: #fff;
        }

        .my-download-btn .my-android {
            background-color: #0f82fd;
        }

        .my-download-btn .my-ios {
            background-color: #b4b4b4;
        }

        .my-content {
            text-align: center;
            position: relative;
        }

        .my-img1 {
            padding-top: 15%;
        }

        .my-bag img {
            width: 100%;
        }

        .my-logo {
            position: absolute;
            display: flex;
            align-items: center;
            left: 10px;
            top: 10px;
        }

        .my-img1 img {
            width: 70%;
        }

        .my-logo img {
            width: 50px;
            border: 1px solid #e9e9e9;
            border-radius: 10px;
            overflow: hidden;
        }

        .my-download-btn {
            padding-top: 50px;
        }

        .my-xiaocxun {
            padding-top: 35%;
        }

        .my-textarea {
            padding-top: 26px;
            text-align: center;
            color: #323232;
        }

        .my-text-b {
            font-size: 24px;
        }
        .my-logo-img img{
          margin-right: 10px;
        }
        .my-logo-text b{
            font-size: 20px;
        }
        .my-logo-text p{
            font-size: 14px;
            color:#989898
        }
        .my-text-p {
            padding-top: 10px;
            font-size: 16px;
            color:#989898
        }

        .my-img1 {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
        }

        .my-xiaocxun img {
            width: 200px;
        }
        .my-text-ts{
            font-size: 12px;
            color: #989898;
            margin-top: 15px;
        }
        .my-weixing{
            display: none;
            position: fixed;
            right: 10px;
            top: 10px;
            max-width: 60%;
            padding: 10px;
            border-radius: 8px;
            background-color: rgba(5, 5, 5, 0.9);

        }
        .my-weixing p{
            color: #fff;
            font-size: 14px;
        }
        #triangle-left{
            position: fixed;
            top: 0;
            right: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 10px solid rgba(5, 5, 5, 0.9);
        }
        .ios-p{
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            margin-top: -30px;
            margin-left: -150px;
            width: 300px;
            background-color: rgba(5, 5, 5, 0.8);
            border-radius: 8px;
        }
        .ios-p p{
            font-size: 14px;
            padding: 20px 15px;
            color: #fff;
        }
    </style>
</head>
<body>
<div class="my-download">
    <div class="my-logo">
        <div class="my-logo-img"><img src="img/logo.png"></div>
        <div class="my-logo-text"><b>优师云</b><p>智慧研修平台</p></div></div>
    <div class="my-content ">
        <div class="my-xiaocxun"><img src="img/mmexport1533263861391.jpg"></div>
        <div class="my-img1"><img src="img/899f7aeb14d774e1aabf9feb55e27ada.png"></div>
    </div>

    <div class="my-textarea">
        <p class="my-text-b">优师云小程序/APP全面上线</p>
        <!--<p class="my-text-p"> “从这里，开始你和 研•学 的故事”</p>-->
        <!--<p class="my-text-p"> “你和名师的距离，只差一次点击进入”</p>-->
        <p class="my-text-p"> “易用·实用·好用的学研一体智慧研修平台”</p>
        <!--<p class="my-text-ts">长按上面小程序码优先进入小程序完成学习</p>-->
    </div>
    <div class="my-download-btn">
        <button id="J-call-app" class="my-android">立即下载</button>
        <p style="font-size: 12px;color: #989898;text-align: center">推荐使用小程序免下载优先体验学习</p>
        <!--<button id="my-btn2" class="my-ios">ios下载</button>-->
    </div>

</div>

<div class="my-weixing">
    <div id="triangle-left"></div>
    <P>1 点击右上方 "•••"</P>
    <p>2 选择在浏览器中打开完成下载</p>
</div>
<div class="ios-p">
    <p>由于苹果端正在App Store提交审核 请广大ios用户使用小程序免下载优先体验</p>
</div>
<script src="js/jquery-3.1.0.min.js"></script>
<script>
    var $eleBtn1 = $("#btn1");
    var $eleBtn2 = $("#btn2");

    //已知一个下载文件的后端接口：
    //https://codeload.github.com/douban/douban-client/legacy.zip/master
    //方法一：window.open()
    // $('.my-download-btn').on('click','.my-android',function () {
    //     var url = "https://raw.githubusercontent.com/HouChengYue/Release/master/youshiyun.apk";
    //     window.open(url);
    // });

    //方法二：通过form
    $eleBtn2.click(function () {
        var $eleForm = $("<form method='get'></form>");

        $eleForm.attr("action", "https://codeload.github.com/douban/douban-client/legacy.zip/master");

        $(document.body).append($eleForm);

        //提交表单，实现下载
        $eleForm.submit();
    });


    //安卓 ios 分享跳入App
    $(document).ready(function (){
        var ua = navigator.userAgent.toLowerCase();
        var url=window.location.href;
        var config = {
            /*scheme:必须*/
            scheme_IOS: 'cundong://',
            scheme_Adr: 'ysyapp://youshiyun.app/web?url='+url,
            download_url: 'https://raw.githubusercontent.com/HouChengYue/Release/master/youshiyun.apk',
            timeout: 600
        };

        function openclient() {
            var startTime = Date.now();
            var ifr = document.createElement('iframe');
            ifr.src = ua.indexOf('os') > 0 ? config.scheme_IOS : config.scheme_Adr;
            ifr.style.display = 'none';
            document.body.appendChild(ifr);
            var t = setTimeout(function() {
                var endTime = Date.now();
                if (!startTime || endTime - startTime < config.timeout + 200) {
                    //安卓
                    window.location = config.download_url;
                } else {

                }
            }, config.timeout);

            window.onblur = function() {
                clearTimeout(t);
            }
        }
        document.getElementById("J-call-app").addEventListener('click',function () {

            if (/iphone|ipad|ipod/.test(ua)) {
                //是苹果
                $('.ios-p').show();
                setTimeout(function(){$('.ios-p').hide();},3000);
            } else {
                //是安卓
            //判断是否在浏览器中打开
                if (isWeixin()) {
                    //是微信
                    $('.my-weixing').show();
                    setTimeout(function(){$('.my-weixing').hide();},3000);
                } else {
                    //不是微信
                    openclient()
                }
            }
        },false);

        //判断是否在微信中打开
        function isWeixin() {
            var ua = navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == "micromessenger") {
                return true;
            } else {
                return false;
            }
        }
    });


</script>
</body>
</html>